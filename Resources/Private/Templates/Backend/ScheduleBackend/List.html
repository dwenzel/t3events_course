{namespace ts=Webfox\T3events\ViewHelpers}
<f:layout name="Lessons" />
<f:section name="content">
	<f:comment>
		<f:debug inline="true">{filterOptions}</f:debug>
		<f:debug inline="true">{performances}</f:debug>
	</f:comment>
	<h1>{f:translate(key: 'header.lessons', default: 'Lessons')}</h1>
	<f:flashMessages renderMode="div" />
	<f:render partial="Backend/Common/SearchForm"
			  arguments="{overwriteDemand: overwriteDemand, filterOptions: filterOptions, showSubjectField: '{settings.participant.search.showSubjectField}'}" />
	<f:if condition="{performances}">
		<f:then>
			<f:be.widget.paginate
				objects="{performances}"
				as="paginatedPerformances"
				configuration="{itemsPerPage: 10, maximumNumberOfLinks: 10, recordsLabel: '{f:translate(key: \'label.lesson\', default: \'Lesson\')}'}"
				>
				<div class="panel panel-space panel-default recordlist">
					<table class="table table-striped table-hover typo3-dblist ">
						<tr class="c-headline">
							<th class="col-icon">ID</th>
							<th>{f:translate(key: 'label.date', default: 'Date')}</th>
							<th class="col-title">{f:translate(key: 'label.course', default: 'Course')}</th>
							<th class="col-control"></th>
							<th>{f:translate(key: 'label.eventLocation', default: 'Location')}</th>
							<th>{f:translate(key: 'label.eventType', default: 'Event Type')}</th>
							<th>{f:translate(key: 'label.status', default: 'Status')}</th>
						</tr>
						<f:for each="{paginatedPerformances}" as="lesson">
							<tr class="db_list_normal">
								<td nowrap="nowrap">{lesson.uid}</td>
								<td nowrap="nowrap">
									<f:format.date format="d.m.Y">{lesson.date}</f:format.date>
								</td>
								<td nowrap="nowrap">
									<f:if condition="{f:cObject(typoscriptObjectPath: 'lib.compatVersion76')}">
										<f:then>
											<a href="#" class="t3-js-clickmenutrigger" data-table="tx_t3events_domain_model_performance" data-uid="{lesson.uid}" data-listframe="0">
												{lesson.event.headline}
											</a>
										</f:then>
										<f:else>
											<a href="" title="edit" onclick="window.location.href='alt_doc.php?returnUrl='+T3_THIS_LOCATION+'&edit[tx_t3events_domain_model_performance][{lesson.uid}]=edit'; return false;">
												{lesson.event.headline}
											</a>
										</f:else>
									</f:if>
								</td>
								<td nowrap="nowrap" class="col-control">
									<f:if condition="{f:cObject(typoscriptObjectPath: 'lib.compatVersion76')}">
										<f:then>
											<div
												class="btn btn-default">
												<f:be.buttons.icon
													icon="actions-open"
													title="UID: {lesson.uid}"
													uri="{ts:be.editRecord(parameters:'edit[tx_t3events_domain_model_performance][{lesson.uid}]=edit')}"
													/>
											</div>
										</f:then>
										<f:else>
											<a href=""
												onclick="window.location.href='alt_doc.php?returnUrl='+T3_THIS_LOCATION+'&edit[tx_t3events_domain_model_performance][{lesson.uid}]=edit'; return false;">
												<f:be.buttons.icon icon="actions-document-open" />
											</a>

										</f:else>
									</f:if>
								</td>
								<td nowrap="nowrap">{lesson.eventLocation.name}</td>
								<td nowrap="nowrap">{lesson.event.eventType.title}</td>
								<td nowrap="nowrap">{lesson.status.title}</td>
							</tr>
						</f:for>
					</table>
				</div>
			</f:be.widget.paginate>
		</f:then>
	</f:if>


</f:section>
