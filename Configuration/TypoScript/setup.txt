
plugin.tx_dakosyreservations {
	view {
		templateRootPath = {$plugin.tx_dakosyreservations.view.templateRootPath}
		partialRootPath = {$plugin.tx_dakosyreservations.view.partialRootPath}
		layoutRootPath = {$plugin.tx_dakosyreservations.view.layoutRootPath}
	}
	mvc.callDefaultActionIfActionCantBeResolved = 1
	persistence {
		storagePid = {$plugin.tx_dakosyreservations.persistence.storagePid}
	}
	settings {
		termsAndConditionsPid = {$plugin.tx_dakosyreservations.settings.termsAndConditionsPid}
		privacyStatementsPid = {$plugin.tx_dakosyreservations.settings.privacyStatementsPid}
		debug {
			course {
				settings = 0
				list = 0
				show = 0
			}
			lesson {
				settings = 0
				list = 0
				show = 0
			}
    	}
		course {
			list {
				paginate = 1
				showSortBy = 1
			}
		}
		lesson {
			show {
				map {
					initialZoom = {$plugin.tx_dakosyreservations.settings.lesson.show.map.initialZoom}
				}
			}
			list {
				paginate = 1
				showSortBy = 1
			}
            listPid = {$plugin.tx_dakosyreservations.settings.lesson.listPid}
			detailPid = {$plugin.tx_dakosyreservations.settings.lesson.detailPid}
		}
		reservation {
			detailPid = {$plugin.tx_dakosyreservations.settings.reservation.detailPid}
			confirm {
				fromEmail = {$plugin.tx_dakosyreservations.settings.reservation.default.fromEmail}
				subject = {$plugin.tx_dakosyreservations.settings.reservation.confirm.subject}
				templateFileName = {$plugin.tx_dakosyreservations.settings.reservation.confirm.templateFileName}
				folderName = {$plugin.tx_dakosyreservations.settings.reservation.confirm.folderName}
                sendNotification = {$plugin.tx_dakosyreservations.settings.reservation.confirm.sendNotification}
			}
		}
	}
	features {
		# uncomment the following line to enable the new Property Mapper.
		# rewrittenPropertyMapper = 1
	}
}

# disable default CSS from t3events
plugin.tx_t3events._CSS_DEFAULT_STYLE >

plugin.tx_dakosyreservations._CSS_DEFAULT_STYLE (

	.tx-dakosy-reservations table {
		border-collapse:separate;
		border-spacing:10px;
	}

	.tx-dakosy-reservations table th {
		font-weight:bold;
	}

	.tx-dakosy-reservations table td {
		vertical-align:top;
	}

	.typo3-messages .message-error {
		color:red;
	}

	.typo3-messages .message-ok {
		color:green;
	}
	.typo3-messages .message-notice {
		color: #1C3862;
	}
)

# Module configuration
module.tx_dakosyreservations {
	persistence {
		storagePid = {$module.tx_dakosyreservations.persistence.storagePid}
	}
	view {
		templateRootPath = {$module.tx_dakosyreservations.view.templateRootPath}
		partialRootPath = {$module.tx_dakosyreservations.view.partialRootPath}
		layoutRootPath = {$module.tx_dakosyreservations.view.layoutRootPath}
	}
	settings {
		lesson {
			list {
				period = futureOnly
			}
		}
		participant {
			download {
				fileName = teilnehmer
			}
			list {
				lessonPeriod = futureOnly
			}
		}
		bookings {
			list {
				period = futureOnly
				order = lesson.date|asc,lesson.uid|desc
			}
			cancel {
				byDakosy{
					confirm {
						sendNotification = 1
						fromEmail = {$plugin.tx_dakosyreservations.settings.reservation.default.fromEmail}
						subject = DAKOSY - Ihr Schulungstermin wurde abgesagt
						templateFileName = ByDakosy
					}
				}
				withCosts {
					confirm {
						sendNotification = 1
						fromEmail = {$plugin.tx_dakosyreservations.settings.reservation.default.fromEmail}
						subject = DAKOSY - Reservierung kostenpflichtig storniert
						templateFileName = WithCosts
					}
				}
				noCharge {
					confirm {
						sendNotification = 1
                    	fromEmail = {$plugin.tx_dakosyreservations.settings.reservation.default.fromEmail}
                    	subject = DAKOSY - Reservierung kostenfrei storniert
                    	templateFileName = NoCharge
                    }
				}
			}
			removeParticipant {
				byDakosy{
					confirm {
						sendNotification = 1
						fromEmail = {$plugin.tx_dakosyreservations.settings.reservation.default.fromEmail}
						subject = DAKOSY - Reservierung für einen Teilnehmer durch DAKOSY storniert
						templateFileName = ByDakosy
					}
				}
				withCosts {
					confirm {
						sendNotification = 1
						fromEmail = {$plugin.tx_dakosyreservations.settings.reservation.default.fromEmail}
						subject = DAKOSY - Reservierung für einen Teilnehmer kostenpflichtig storniert
						templateFileName = WithCosts
					}
				}
				noCharge {
					confirm {
						sendNotification = 1
						fromEmail = {$plugin.tx_dakosyreservations.settings.reservation.default.fromEmail}
						subject = DAKOSY - Reservierung für einen Teilnehmer kostenfrei storniert
						templateFileName = NoCharge
					}
				}
			}

			notify {
				fromEmail = {$plugin.tx_dakosyreservations.settings.reservation.default.fromEmail}
			}
		}
	}
}

####################
# include default CSS

page.includeCSS.dakosyReservationsBasic = EXT:dakosy_reservations/Resources/Public/Css/dakosyReservationsBasic.css


####################
# date format helper
# provides a workaround for missing localization of <f:format.date /> view helper
lib.dateMe = TEXT
lib.dateMe {
	current = 1
	strftime = %a, %d.%m.%y
}
####################
# time format helper
# provides a workaround for incorrect behaviour of <f:format.date /> view helper
# see: https://forge.typo3.org/issues/49449
lib.timeValue = TEXT
lib.timeValue {
	current = 1
	strftime.GMT = 1
	strftime = %H:%M
}
